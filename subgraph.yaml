specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: Registry
    network: base
    source:
      address: "0x1493b2567056c2181630115660963E13A8E32735"
      abi: Registry
      startBlock: 17640000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.8
      language: wasm/assemblyscript
      entities:
        - Domain
        - Account
        - Resolver
        - DomainEvent
      abis:
        - name: Registry
          file: ./abis/Registry.json
      eventHandlers:
        - event: NewOwner(indexed bytes32,indexed address)
          handler: handleNewOwner
        - event: NewResolver(indexed bytes32,indexed address)
          handler: handleNewResolver
        - event: NewTTL(indexed bytes32,uint64)
          handler: handleNewTTL
      file: ./src/registry.ts

  - kind: ethereum
    name: BaseRegistrar
    network: base
    source:
      address: "0xa0c70ec36c010b55e3c434d6c6ebeec50c705794"
      abi: BaseRegistrar
      startBlock: 17640000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.8
      language: wasm/assemblyscript
      entities:
        - Registration
        - NameRegistered
        - NameRenewed
        - NameTransferred
        - RegistrationEvent
      abis:
        - name: BaseRegistrar
          file: ./abis/BaseRegistrar.json
      eventHandlers:
        - event: NameRegistered(indexed uint256,indexed address,uint256)
          handler: handleNameRegistered
        - event: NameRenewed(indexed uint256,uint256)
          handler: handleNameRenewed
      file: ./src/registrar.ts

  - kind: ethereum
    name: RegistrarController
    network: base
    source:
      address: "0x49ae3cc2e3aa768b1e5654f5d3c6002144a59581"
      abi: RegistrarController
      startBlock: 17640000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.8
      language: wasm/assemblyscript
      entities:
        - Registration
        - RegistrationEvent
      abis:
        - name: RegistrarController
          file: ./abis/RegistrarController.json
      eventHandlers:
        - event: NameRegistered(string,indexed bytes32,indexed address,uint256)
          handler: handleControllerNameRegistered
      file: ./src/controller.ts



  - kind: ethereum
    name: ReverseRegistrar
    network: base
    source:
      address: "0x79ea96012eea67a83431f1701b3dff7e37f9e282"
      abi: ReverseRegistrar
      startBlock: 17640000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.8
      language: wasm/assemblyscript
      entities:
        - Domain
        - Account
        - DomainEvent
      abis:
        - name: ReverseRegistrar
          file: ./abis/ReverseRegistrar.json
      eventHandlers:
        - event: BaseReverseClaimed(indexed address,indexed bytes32)
          handler: handleBaseReverseClaimed
      file: ./src/reverse.ts
