specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: Registry
    network: base
    source:
      address: "0xb94704422c2a1e396835a571837aa5ae53285a95"
      abi: Registry
      startBlock: 17571480
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Domain
        - Account
        - Resolver
        - DomainEvent
      abis:
        - name: Registry
          file: ./abis/Registry.json
      eventHandlers:
        - event: NewOwner(indexed bytes32,indexed bytes32,address)
          handler: handleNewOwner
        - event: NewResolver(indexed bytes32,address)
          handler: handleNewResolver
        - event: NewTTL(indexed bytes32,uint64)
          handler: handleNewTTL
        - event: Transfer(indexed bytes32,address)
          handler: handleTransfer
      file: ./src/registry.ts

  - kind: ethereum
    name: BaseRegistrar
    network: base
    source:
      address: "0x03c4738Ee98aE44591e1A4A4F3CaB6641d95DD9a"
      abi: BaseRegistrar
      startBlock: 17571480
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Registration
        - NameRegistered
        - NameRenewed
        - NameTransferred
        - RegistrationEvent
      abis:
        - name: BaseRegistrar
          file: ./abis/BaseRegistrar.json
      eventHandlers:
        - event: NameRegistered(string,indexed bytes32,address,uint256,uint256)
          handler: handleNameRegistered
        - event: NameRenewed(string,indexed bytes32,uint256,uint256)
          handler: handleNameRenewed
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleNameTransferred
      file: ./src/registrar.ts

  - kind: ethereum
    name: RegistrarController
    network: base
    source:
      address: "0x4cCb0BB02FCABA27e82a56646E81d8c5bC4119a5"
      abi: RegistrarController
      startBlock: 17571480
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Registration
        - RegistrationEvent
      abis:
        - name: RegistrarController
          file: ./abis/RegistrarController.json
      eventHandlers:
        - event: NameRegistered(string,indexed bytes32,address,uint256,uint256)
          handler: handleControllerNameRegistered
      file: ./src/controller.ts

  - kind: ethereum
    name: NameWrapper
    network: base
    source:
      address: "0xBD9bab0A97b2Cc6Aa28b9C902d7C656B121D5F9F"
      abi: NameWrapper
      startBlock: 17571480
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - WrappedDomain
        - Domain
        - Account
      abis:
        - name: NameWrapper
          file: ./abis/NameWrapper.json
      eventHandlers:
        - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleWrappedDomainTransfer
        - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleWrappedDomainBatchTransfer
      file: ./src/wrapper.ts

  - kind: ethereum
    name: L2Resolver
    network: base
    source:
      address: "0xC6d566A56A1aFf6508b41f6c90ff131615583BCD"
      abi: L2Resolver
      startBlock: 17571480
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Resolver
        - AddrChanged
        - MulticoinAddrChanged
        - AbiChanged
        - PubkeyChanged
        - TextChanged
        - ContenthashChanged
        - InterfaceChanged
        - AuthorisationChanged
        - VersionChanged
        - ResolverEvent
      abis:
        - name: L2Resolver
          file: ./abis/L2Resolver.json
      eventHandlers:
        - event: AddrChanged(indexed bytes32,address)
          handler: handleAddrChanged
        - event: AddressChanged(indexed bytes32,uint256,bytes)
          handler: handleMulticoinAddrChanged
        - event: ABIChanged(indexed bytes32,uint256)
          handler: handleAbiChanged
        - event: PubkeyChanged(indexed bytes32,bytes32,bytes32)
          handler: handlePubkeyChanged
        - event: TextChanged(indexed bytes32,indexed string,string)
          handler: handleTextChanged
        - event: ContenthashChanged(indexed bytes32,bytes)
          handler: handleContenthashChanged
        - event: InterfaceChanged(indexed bytes32,indexed bytes4,address)
          handler: handleInterfaceChanged
        - event: AuthorisationChanged(indexed bytes32,indexed address,indexed address,bool)
          handler: handleAuthorisationChanged
        - event: VersionChanged(indexed bytes32,uint64)
          handler: handleVersionChanged
      file: ./src/resolver.ts

  - kind: ethereum
    name: ReverseRegistrar
    network: base
    source:
      address: "0x79ea96012eea67a83431f1701b3dff7e37f9e282"
      abi: ReverseRegistrar
      startBlock: 17571480
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Domain
        - Account
        - DomainEvent
      abis:
        - name: ReverseRegistrar
          file: ./abis/ReverseRegistrar.json
      eventHandlers:
        - event: ReverseClaimed(indexed address,indexed bytes32)
          handler: handleReverseClaimed
      file: ./src/reverse.ts
